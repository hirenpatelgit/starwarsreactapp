(this.webpackJsonpstarwars=this.webpackJsonpstarwars||[]).push([[0],{39:function(e,t,n){e.exports=n(79)},44:function(e,t,n){},45:function(e,t,n){},50:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(21),i=n.n(s),o=(n(44),n(45),n(10)),c=n(11),l=n(16),u=n(15),h=n(17),m=n(14),p=n(23),f=n(12),d=(n(50),function(e){return{type:"typeIsLogin",payload:e}}),g=function(e){var t={Accept:"application/json","Content-Type":"application/json"};return fetch(e,{method:"GET",headers:t}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong ...")})).then((function(e){return e})).catch((function(e){return e}))},b="https://swapi.co/api/",v="people",y="planets",S=function(e){return b+e},O=n(81),E=n(82),_=n(29),k=(n(52),n(35)),I=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={txt_username:"",txt_password:"",isStartLoader:!1,errorMessage:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("popstate",(function(t){e.state.is_login?e.props.history.push("/search-bar"):(window.location.pathname,e.props.history.push("/auth-login"))}))}},{key:"login",value:function(){var e,t=this;this.setState({isStartLoader:!0}),(e=this.state.txt_username,new Promise((function(t,n){var a=S(v)+"?search="+e;g(a).then((function(e){e&&Object.keys(e).length>0&&t(e.results)})).catch((function(e){n(e.message)}))}))).then((function(e){if(e&&e.length>0){var n=e[0].name,a=e[0].birth_year;n===t.state.txt_username&&a===t.state.txt_password?t.setState({isStartLoader:!1,errorMessage:"You are logged in successfully."},(function(){t.setTimerForErrorInvisible(!0,e[0])})):t.setState({isStartLoader:!1,errorMessage:"Enter Wrong Credential."},(function(){t.setTimerForErrorInvisible(!1,null)}))}else t.setState({isStartLoader:!1,errorMessage:"User not found."},(function(){t.setTimerForErrorInvisible(!1,null)}))})).catch((function(e){t.setState({isStartLoader:!1,errorMessage:e},(function(){t.setTimerForErrorInvisible(!1,null)}))}))}},{key:"setTimerForErrorInvisible",value:function(e,t){var n=this;setTimeout((function(){n.setState({errorMessage:""},(function(){e&&(n.props.ACTION_IS_LOGIN(!0),n.props.ACTION_LOGIN_USER_INFO(t),n.props.history.replace("/search-bar"),n.props.history.go(1))}))}),2e3)}},{key:"btnLoginClicked",value:function(){this.state.txt_username.length<=0?alert("Kindly enter username"):this.state.txt_password.length<=0?alert("Kindly enter password"):this.login()}},{key:"renderLoader",value:function(){return r.a.createElement(k.ClipLoader,{sizeUnit:"px",size:25,color:"#FFE300",loading:this.state.isStartLoader})}},{key:"renderError",value:function(){if(this.state.errorMessage.length>0)return r.a.createElement("label",null,this.state.errorMessage)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(O.a,{className:"login-form-row"},r.a.createElement(E.a,{xs:{span:12,offset:12},lg:{span:4,offset:4}},r.a.createElement("div",{className:"login-form-div"},r.a.createElement("section",{className:"login-form-title-section"},r.a.createElement("label",{className:"login-form-label-title"},"Login With Star Wars Characters")),r.a.createElement("section",{className:"login-form-text-field-section"},r.a.createElement(_.Textbox,{attributesInput:{id:"Name",name:"Name",type:"text",placeholder:"Username",className:"TextBoxDesign"},value:this.state.txt_username,onChange:function(t,n){e.setState({txt_username:t})},onBlur:function(e){console.log(e)},validationOption:{name:"Username",check:!0,required:!0}}),r.a.createElement("br",null),r.a.createElement(_.Textbox,{attributesInput:{id:"Password",name:"Password",type:"password",placeholder:"Password",className:"TextBoxDesign"},value:this.state.txt_password,onChange:function(t,n){e.setState({txt_password:t})},onBlur:function(e){console.log(e)},validationOption:{name:"Password",check:!0,required:!0}})),r.a.createElement("br",null),this.renderLoader(),this.renderError(),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement("button",{className:"login-form-submit-button",onClick:function(){e.btnLoginClicked()}},"Login"))))))}}]),t}(a.Component),w=Object(f.b)((function(e){return{is_login:e.AuthReducer.is_login}}),{ACTION_IS_LOGIN:d,ACTION_LOGIN_USER_INFO:function(e){return{type:"typeUserLoginInfo",payload:e}}})(I),L=Object(m.g)(w),j=n(18),x=(n(78),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchString:"",searchIndex:1,serachResults:[],time:0,isOn:!1,start:0},n.startTimer=n.startTimer.bind(Object(j.a)(n)),n.stopTimer=n.stopTimer.bind(Object(j.a)(n)),n.resetTimer=n.resetTimer.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"startTimer",value:function(){var e=this;this.setState({isOn:!0,time:this.state.time,start:Date.now()-this.state.time}),this.timer=setInterval((function(){return e.setState({time:Date.now()-e.state.start},(function(){e.state.time>6e4&&e.resetTimer()}))}),1e3)}},{key:"stopTimer",value:function(){this.setState({isOn:!1}),clearInterval(this.timer)}},{key:"resetTimer",value:function(){var e=this;this.setState({time:0,isOn:!1,searchIndex:1},(function(){e.startTimer()}))}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("popstate",(function(t){e.props.is_login&&"/auth-login"===e.props.history.location.pathname&&e.props.history.push("/search-bar")})),this.startTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"renderLogoutButton",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{className:"search-form-submit-button",onClick:function(){e.btnLogoutClicked()}},"Logout")))}},{key:"btnLogoutClicked",value:function(){this.props.ACTION_IS_LOGIN(!1),this.props.ACTION_LOGOUT({}),this.props.history.replace("/auth-login"),this.props.history.go(1)}},{key:"onEnterKeyPress",value:function(){this.state.searchString.length>0?"Luke Skywalker"!==this.props.user_login_info.name&&this.state.searchIndex>15?alert("Search limit exceeded. You can make only 15 serach in a minut."):this.doSearchPlanet():this.setState({serachResults:[]})}},{key:"doSearchPlanet",value:function(){var e,t=this;(e=this.state.searchString,new Promise((function(t,n){var a=S(y)+"?search="+e+"&format=json";g(a).then((function(e){e&&Object.keys(e).length>0&&t(e.results)})).catch((function(e){n(e.message)}))}))).then((function(e){if(e&&e.length>0)try{e.sort((function(e,t){return("unknown"===t.population?0:t.population)-("unknown"===e.population?0:e.population)}))}catch(n){}t.setState({serachResults:e}),t.setState({searchIndex:t.state.searchIndex+1})})).catch((function(e){t.setState({searchIndex:t.state.searchIndex+1}),alert(e)}))}},{key:"handleSearch",value:function(e){var t=this;e.preventDefault(),this.setState({searchString:e.target.value},(function(){t.onEnterKeyPress()}))}},{key:"renderSerachItems",value:function(){return this.state.serachResults.length>0?this.state.serachResults.map((function(e,t){return r.a.createElement("div",{className:"search-result-item"},r.a.createElement("lable",null,"Planet Name : "+e.name),r.a.createElement("br",null),r.a.createElement("lable",{style:{"font-size":30-t}},"Population : "+e.population))})):r.a.createElement("lable",null,"0 Results")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",{className:"search-form-title-section"},r.a.createElement("h3",null,r.a.createElement("label",{className:"search-form-label-title"},"Search Starwars Planets"))),this.renderLogoutButton(),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("input",{type:"text",placeholder:"Type planet name here",className:"SearchTextBoxDesign",value:this.state.searchString,onChange:this.handleSearch.bind(this)})),r.a.createElement("div",{className:"search-result-div"},this.renderSerachItems()))}}]),t}(a.Component)),T=Object(f.b)((function(e){var t=e.AuthReducer;return{is_login:t.is_login,user_login_info:t.user_login_info}}),{ACTION_IS_LOGIN:d,ACTION_LOGOUT:function(){return{type:"typeLogout"}}})(x),N=Object(m.g)(T),C=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderLoginRouter",value:function(){if(!this.props.is_login)return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/auth-login",component:L}))}},{key:"renderRouteIfLogin",value:function(){if(this.props.is_login)return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/search-bar",component:N}))}},{key:"checkIfLogin",value:function(){return this.props.is_login?"/search-bar":"/auth-login"}},{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(m.b,{path:"/"},r.a.createElement(m.a,{to:this.checkIfLogin()})),this.renderLoginRouter(),this.renderRouteIfLogin()))}}]),t}(a.Component),R=Object(f.b)((function(e){return{is_login:e.AuthReducer.is_login}}),{})(C),A=n(13),P=n(26),G={is_login:!1,user_login_info:{}};var U=Object(A.c)({AuthReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"typeIsLogin":return Object(P.a)({},e,{is_login:t.payload});case"typeUserLoginInfo":return Object(P.a)({},e,{user_login_info:t.payload});case"typeLogout":return Object(P.a)({},e,{is_login:!1,user_login_info:{}});default:return e}}}),M=n(38),B=new(function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"loadState",value:function(){try{var e=localStorage.getItem("starWarGetStore");return null===e?this.initializeState():JSON.parse(e)}catch(t){return this.initializeState()}}},{key:"saveState",value:function(e){try{var t=JSON.stringify(e);localStorage.setItem("starWarGetStore",t)}catch(n){}}},{key:"initializeState",value:function(){return{}}}]),e}()),F=(0,A.d)(Object(A.a)(M.a)),D=Object(A.e)(U,B.loadState(),F);D.subscribe((function(){B.saveState(D.getState())}));var W=function(){return r.a.createElement(f.a,{store:D},r.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.44025dce.chunk.js.map